좋습니다. **"턴제 커맨드 전투 + 텍스트 로그"** 방식은 고전 RPG의 향수를 자극하면서도, 전략적인 깊이를 담기에 최적입니다.

AI가 유저의 입력을 받아 JSON으로 변환하려면, **사전에 정의된 시스템(키워드/로직)**이 매우 방대하고 구체적이어야 합니다. 그래야 유저가 "미쳐 날뛰는 광전사"라고 입력했을 때, AI가 `광기(Madness)`와 `공격력 증가(Buff_Atk)` 태그를 딱 골라서 넣을 수 있으니까요.

개발 단계에서 구현해 두어야 할 **[시스템 라이브러리]**와 **[카드 카테고리]**를 정리해 보았습니다.

---

### 1. 🎴 카드 카테고리 (Card Types)

AI는 유저의 설명을 듣고 가장 먼저 이 중 하나를 선택합니다.

| 카테고리     | 설명                | 주요 데이터 필드                                              |
| :----------- | :------------------ | :------------------------------------------------------------ |
| **MONSTER**  | 일반/보스 몬스터    | HP, 공격력, 방어력, 속도, 스킬셋(1~3개), 드랍 아이템          |
| **TRAP**     | 함정 (피해/디버프)  | 감지 난이도, 해제 조건(스탯), 실패 시 페널티(HP감소/상태이상) |
| **SHRINE**   | 제단 (버프/교환)    | 긍정적 효과(축복), 거래 조건(HP 10% 희생하여 공격력 UP 등)    |
| **TREASURE** | 보물 상자           | 획득 아이템 목록, 잠금 여부(열쇠 필요)                        |
| **NPC**      | 상인/퀘스트/대화    | 판매 목록, 대사 리스트, 선택지 이벤트                         |
| **REST**     | 휴식처 (캠프파이어) | 회복량(HP/MP), 카드 강화 기회 제공                            |

---

### 2. ⚙️ 전투 시스템 & 상태이상 라이브러리 (Status Effects)

이 부분이 게임의 재미를 결정합니다. AI가 조합할 수 있는 **레고 블록**들입니다.

#### A. 지속 효과 (DoT / HoT)

- **맹독 (Poison):** 매 턴 최대 HP의 N% 피해. (중첩 가능)
- **출혈 (Bleed):** 행동(공격/스킬)을 할 때마다 고정 피해.
- **화상 (Burn):** 매 턴 피해 + 방어력 20% 감소.
- **재생 (Regen):** 매 턴 HP N 회복.
- **부식 (Corrosion):** 매 턴 장비 내구도 감소 또는 방어력 영구 감소.

#### B. 행동 제어 (Crowd Control)

- **기절 (Stun):** 1턴간 행동 불가.
- **수면 (Sleep):** 행동 불가. 피격 시 깨어남 + 첫 피격 데미지 2배(치명타).
- **공포 (Fear):** 50% 확률로 공격 실패(빗나감).
- **속박 (Root):** 도망 불가 + 회피율 0.
- **침묵 (Silence):** 스킬 사용 불가 (기본 공격만 가능).

#### C. 특수 상태 (Special Mechanics)

- **광기 (Madness):** 공격력 50% 증가하지만, 30% 확률로 아군(또는 자신)을 공격.
- **각성 (Awakening):** HP가 30% 이하일 때 모든 스탯 30% 상승.
- **반사 (Reflect):** 받은 피해의 N%를 공격자에게 되돌려줌.
- **불사 (Undying):** HP가 0이 되어도 1턴간 죽지 않음.
- **은신 (Stealth):** 적의 단일 공격 대상이 되지 않음. (다음 공격 시 치명타 확정 후 해제)
- **도발 (Taunt):** 적의 모든 공격을 자신이 받음.

#### D. 스탯 변화 (Stat Modifiers)

- **취약 (Vulnerable):** 받는 피해 50% 증가.
- **무장 (Fortified):** 받는 피해 30% 감소.
- **날카로움 (Sharp):** 치명타 확률 증가.
- **실명 (Blind):** 명중률 대폭 감소.

---

### 3. ⚔️ 스킬 및 AI 행동 패턴 (Behavior Logic)

몬스터나 카드가 가질 수 있는 행동 패턴입니다. AI는 텍스트 묘사에 맞춰 이 로직을 할당합니다.

- `Normal_Attack`: 기본 공격
- `Heavy_Strike`: 명중률 낮음, 데미지 높음
- `Double_Hit`: 50% 데미지로 2번 공격
- `Life_Steal`: 입힌 피해의 50% 회복
- `Execute`: 적 체력 20% 이하일 때 즉사 시킴
- `Summon_Minion`: 쫄병 몬스터 소환 (슬롯 빈자리 이용)
- `Heal_Self`: 자신 HP 회복
- `Buff_Ally`: 아군 몬스터에게 버프 부여

---

네, 요청하신 대로 **[시스템 태그 & 프로세싱 로직 라이브러리 v1.0]**을 작성합니다.
AI가 JSON 생성 시 이 키워드들을 조합하여 데이터를 구성하며, 게임 엔진은 우측의 처리 로직을 수행합니다.

---

### 1. 🧬 종족 및 재질 태그 (Unit Tags)

_대상의 기본 속성을 정의하며, 상태이상 면역 및 특정 스킬의 타겟팅 여부를 결정합니다._

- `TAG_HUMANOID` (인간형): `MENTAL` 계열 공격에 대해 저항력 없음 (피해량 100%).
- `TAG_BEAST` (야수): `FEAR` 상태이상에 취약 (걸릴 확률 1.5배), `NATURE` 마법 피해 20% 감소.
- `TAG_UNDEAD` (언데드): `HEAL` 효과를 받으면 회복량만큼 `HOLY` 피해를 입음. `BLEED`, `POISON` 면역.
- `TAG_CONSTRUCT` (기계/구조물): `MENTAL`, `BLEED`, `POISON`, `DISEASE` 완전 면역. 방어력 +30% 보정.
- `TAG_ETHEREAL` (영체): 물리기반 공격(`PHYSICAL`) 회피율 50% 고정 적용. `MAGIC` 공격에 1.5배 피해.
- `TAG_PLANT` (식물): `FIRE` 속성 피해 2.0배(취약). `WATER` 속성 피격 시 HP 5% 회복.
- `TAG_DEMON` (악마): `HOLY` 피해 2.0배. `DARK` 피해 흡수(회복). `CURSE` 상태이상 면역.
- `TAG_DRAGON` (용): 모든 상태이상 저항 50%. 기본 방어력 무시 효과에 면역.
- `TAG_SLIME` (점액): `PHYSICAL_BLUNT`(타격) 피해 50% 감소. `PHYSICAL_SLASH`(참격) 피격 시 일정 확률로 분열(Split).
- `TAG_INSECT` (곤충): `FIRE` 취약(1.5배). 개체 수가 많을수록 공격력 증가 버프(`SWARM_TACTIC`) 활성화.
- `TAG_GIANT` (거인): `STUN`, `KNOCKBACK` 면역. 민첩성(AGI) 기반 공격에 명중률 패널티 받음.

---

### 2. ⚔️ 공격 속성 및 타입 (Damage Attributes)

_데미지 계산 시 상성을 적용하는 분류입니다._

- `ATTR_PHYSICAL_SLASH` (참격): `UNARMORED`(경장갑) 대상에게 데미지 1.2배. `SKELETON`에게 데미지 0.5배.
- `ATTR_PHYSICAL_BLUNT` (타격): `ARMORED`(중장갑) 및 `CONSTRUCT` 대상에게 방어 관통 30% 적용.
- `ATTR_PHYSICAL_PIERCE` (관통): 대상의 방어력 50% 무시. `SHIELD` 상태인 적에게 데미지 0.5배.
- `ATTR_FIRE` (화염): 데미지 입힌 후 40% 확률로 `STATUS_BURN` 부여. `ICE` 속성 적에게 2.0배 피해.
- `ATTR_ICE` (냉기): 데미지 입힌 후 40% 확률로 `STATUS_CHILL` 부여. `WET` 상태인 적에게 `STATUS_FREEZE` 확정 적용.
- `ATTR_LIGHTNING` (전기): `METAL` 장비 착용자나 `WET` 상태 적에게 데미지 1.5배 + `STATUS_SHOCK` 부여.
- `ATTR_POISON` (독): 즉시 피해량은 낮으나, `STATUS_POISON` 스택을 2개 부여. `UNDEAD`/`CONSTRUCT` 면역.
- `ATTR_HOLY` (신성): `UNDEAD`, `DEMON`에게 2.0배 피해. 아군에게 적중 시 데미지 대신 치유.
- `ATTR_DARK` (암흑): 기본 데미지의 20%만큼 시전자 HP 회복(`LIFESTEAL`). `HOLY` 적에게 1.5배 피해.
- `ATTR_MENTAL` (정신): 방어력 무시. 대상의 현재 MP(또는 정신력)에 비례해 데미지 증가. `CONSTRUCT` 면역.
- `ATTR_SOUND` (음파): `EAVSION`(회피) 상태 무시하고 필중. `SILENCE` 상태인 적에게 2.0배 피해.
- `ATTR_ACID` (산성): 데미지를 줄 때마다 대상의 방어력을 영구적으로 -2 깎음(최대 -20).

---

### 3. 🦠 상태이상: 지속 피해 & 디버프 (DoT & Debuffs)

_턴 시작/종료 시 또는 행동 시 트리거되는 부정적 효과입니다._

- `STATUS_BURN` (화상): 턴 종료 시 [스택 수 x 5] 화염 피해. 방어력 -20%. (최대 5스택)
- `STATUS_POISON` (중독): 턴 종료 시 [최대 체력의 5%] 독 피해. 치유 효과 50% 감소.
- `STATUS_BLEED` (출혈): 행동(공격/스킬)을 할 때마다 10 고정 피해. 이동 시 피해 2배.
- `STATUS_CHILL` (오한): 속도(SPD) -30%. 회피율 -20%. 3스택 누적 시 `STATUS_FREEZE`로 전환.
- `STATUS_SHOCK` (감전): 피격 시 데미지 20% 추가 증가. 스킬 사용 시 20% 확률로 실패(Self-Stun).
- `STATUS_CURSE` (저주): 받는 모든 피해 1.5배 증가. 사망 시 부활 불가.
- `STATUS_BLIND` (실명): 명중률 50% 고정 감소. 치명타 발동 불가.
- `STATUS_WEAKNESS` (약화): 공격력(ATK) 40% 감소. 상태이상 저항력 0으로 변경.
- `STATUS_VULNERABLE` (취약): 다음 1회 피격 시 받는 데미지 2.0배 (피격 후 해제).
- `STATUS_SILENCE` (침묵): 마법/스킬 사용 불가. 기본 공격(`ACT_BASIC`)만 가능.
- `STATUS_FEAR` (공포): 매 턴 50% 확률로 행동 불가. 행동 성공 시에도 명중률 -30%.
- `STATUS_ROT` (부패): 최대 체력(MaxHP) 자체가 매 턴 2%씩 영구 감소. 전투 종료 후에도 유지(던전 내).

---

### 4. 🌀 상태이상: 제어 & 특수 (Crowd Control & Special)

_행동을 원천 봉쇄하거나 특수한 판정을 내립니다._

- `STATUS_STUN` (기절): 1턴간 행동 불가. 회피율 0%.
- `STATUS_FREEZE` (빙결): 행동 불가. 물리 피해를 받으면 2.0배 데미지 입고 해제됨(Shatter).
- `STATUS_SLEEP` (수면): 행동 불가. 매 턴 HP 5% 회복. 피격 시 깨어나며 해당 피격은 100% 치명타.
- `STATUS_ROOT` (속박): 도주 불가. 회피율 0%. 근접 공격 불가(사거리 제한).
- `STATUS_CONFUSION` (혼란): 행동 시 50% 확률로 아군이나 자신을 공격.
- `STATUS_CHARM` (매혹): 적을 공격 불가. 시전자에게 이로운 버프나 힐을 사용.
- `STATUS_PETRIFY` (석화): 행동 불가. 방어력 +100% 증가. 3턴 뒤 즉사하거나 영구 행동 불가.

---

### 5. 🛡️ 버프 및 강화 (Buffs)

_유리한 효과를 제공합니다._

- `BUFF_REGEN` (재생): 턴 시작 시 HP 10% 회복. `BURN` 상태이상에 걸리면 해제됨.
- `BUFF_MIGHT` (괴력): 공격력 +50%.
- `BUFF_IRON_SKIN` (철갑): 받는 물리 피해 30% 감소.
- `BUFF_REFLECT` (반사): 받은 피해의 30%를 공격자에게 되돌려줌.
- `BUFF_EVASION` (회피): 다음 1회 공격을 100% 확률로 무효화.
- `BUFF_VAMPIRISM` (흡혈): 가한 피해의 30%만큼 HP 회복.
- `BUFF_BERSERK` (광폭화): 공격력 +100%, 방어력 -50%. 제어 불가(자동 공격).
- `BUFF_STEALTH` (은신): 단일 타겟팅 지정 불가. 다음 공격 시 치명타 확정 후 해제.
- `BUFF_THORNS` (가시): 근접 피격 시 공격자에게 고정 피해 5 반사.

---

### 6. ⚙️ 행동 로직 및 스킬 키워드 (Action Logic)

_AI가 생성한 몬스터/함정이 수행할 구체적인 메커니즘입니다._

- `LOGIC_MULTI_HIT_X` (연타): 데미지 계수 0.6으로 X회 반복 공격. (방어력 높은 적에게 불리)
- `LOGIC_AOE_ALL` (전체 공격): 적 파티 전원에게 데미지. 데미지 계수 0.7.
- `LOGIC_EXECUTE` (처형): 대상 체력이 30% 이하일 때 데미지 3배. 사망 시 쿨타임 초기화.
- `LOGIC_SUMMON` (소환): 빈 슬롯에 지정된 `MINION` ID의 몬스터를 생성.
- `LOGIC_TAUNT` (도발): 2턴간 적의 모든 단일 공격을 자신에게 유도. 방어력 +20% 증가.
- `LOGIC_COUNTERS` (반격): 회피 성공 시 즉시 기본 공격으로 응수.
- `LOGIC_CLEANSE` (정화): 자신/아군의 모든 디버프 제거. 디버프 1개당 HP 회복.
- `LOGIC_SACRIFICE` (희생): 자신의 현재 체력 50%를 소모하여 아군 1명 완전 회복 또는 부활.
- `LOGIC_CHARGE` (충전): 1턴간 아무것도 하지 않음(기 모으기). 다음 턴 데미지 3배.
- `LOGIC_STEAL` (훔치기): 플레이어의 골드를 10% 강탈하거나 소모품 1개를 제거.

---

### 7. 🗺️ 던전 환경 및 타일 효과 (Environment Tags)

_던전 전체 또는 특정 방에 적용되는 전역 효과(Global Effect)입니다._

- `ENV_DARKNESS` (암흑): 명중률 전체 -20%. `TORCH`(횃불) 아이템 사용 시 해제.
- `ENV_MIST` (안개): 원거리 공격 사거리/데미지 50% 감소.
- `ENV_VOLCANO` (화산): 매 턴 모든 캐릭터에게 화염 피해 5. `STATUS_BURN` 지속시간 2배.
- `ENV_HOLY_GROUND` (성소): 매 턴 모든 캐릭터 HP 10 회복. `UNDEAD`는 데미지 10 입음.
- `ENV_MAGNETIC` (자기장): `METAL` 장비 착용자 행동 순서(Initiative) 최하위로 고정.
- `ENV_ECHO` (메아리): 마법 스킬 사용 시 30% 확률로 한 번 더 발동(Double Cast).
- `ENV_NARROW` (협소함): 전열(Front-line) 캐릭터만 전투 가능. 후열은 공격/피격 불가.

---

**이 키워드 리스트를 기반으로 JSON 스키마가 정의되며, AI는 유저의 자연어 입력을 위 태그들의 조합으로 번역하게 됩니다.**
